Article under construction. Below, you will find notes / gibberish that I'm collecting to make into an article.

See also: [[Multicast]]

------------------------------------------------------------------

= Multicast's roles in FOG =

Multicasting in FOG uses UDPcast to send a single image to multiple computers using only slightly more bandwidth than sending the image to a single computer or unicast. Multicasting will be slightly slower than a single unicast task.


= The Basics =

For Multicasting to work, you have to have a master storage node set, the master storage node '''should''' be a FOG server (and not a NAS), and the master storage node's interface name must be set correctly. 

CentOS and Fedora can use weird interface names. You can get the names of the interfaces like this: 

<pre>ip addr</pre>

The above command will just show the names and interface names along with some other information. From this output, you would find your interface name and set it correctly on the master storage node.

FOG version 1.2.0 has a few issues with finding the correct interface name for newer Red-Hat based systems like CentOS and Fedora. In current FOG Trunk and the future 1.3.0 release, generally the installation script does a good job at finding the correct interface name to use.

Here are some screenshots from the current FOG Trunk development (future 1.3.0) that show this process.


Below, the command to use in CentOS 7, Fedora 21, 22, and RHEL7 to find interface names.

[[File:Finding-the-interface.png]]


Below, verifying that a storage node is set as a "Master".

[[File:Master-storage-node.png]]


Below, setting the interface name for a storage node.

[[File:Set the interface.jpg]]



= Testing Multicast =


udp-sender
http://linux.die.net/man/1/udp-sender


= Logs =

Located here:

Web Interface -> FOG Configuration -> Log Viewer -> Multicast

And here:

Shell -> /opt/fog/log/multicast.log


= Clear DB of non-essential multicast data =


Inside the FOG DB, there are two multicast association tables. You can delete all the rows in those tables, re-run the FOG installer, and try again.


<pre>mysql
use fog
DELETE FROM `multicastSessions` WHERE 1;
DELETE FROM `multicastSessionsAssoc` WHERE 1;
DELETE FROM `tasks` WHERE `taskTypeID` = 8;
quit</pre>

= FOGMulticastManager =

Check the status of FOGMulticastManager and restart:

Fedora:
<pre>systemctl status FOGMulticastManager
systemctl restart FOGMulticastManager</pre>

Ubuntu:
<pre>sudo service FOGMulticastManager status
sudo service FOGMulticastManager restart</pre>


= Notes =


Check that the interface setting for the image’s relevant storage node master is set to the actual interface name of that system. If not, change it and restart the FOGMulticastManager service.