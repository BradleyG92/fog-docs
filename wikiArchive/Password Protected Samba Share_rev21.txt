This article describes how to create a basic password protected samba share on Linux. This share can be accessed via Windows, OSX, or Linux.

We'll be making a share called <font color="red">smallshare</font>. It will be accessible via UNC paths in windows as <font color="red">\\x.x.x.x\smallshare</font> where x.x.x.x is the server's IP address. The share will reside on disk at <font color="red">/images/smallshare</font>

On CentOS 7, Fedora, Ubuntu, and probably Debian, the process is almost identical.

= Install Samba =

For CentOS 7 and older, and Fedora 21 and older, install samba:

<pre>yum install samba samba-client -y</pre>

For Fedora 22 and newer, and probably CentOS 8 and newer, install samba:

<pre>dnf install samba samba-client -y</pre>

For Ubuntu and Debian, install samba:

<pre>apt-get install samba samba-client -y</pre>

= Start Samba =

Start Samba on Fedora/CentOS/RHEL:

<pre>systemctl start smb</pre>

Start Samba on Ubuntu/Debian:

<pre>service smb start</pre>

= Make the directory =

Make the directory you want to share:
<pre>mkdir /images/smallshare</pre>

= Create user and set password =

Make a user specifically for it:

<pre>useradd smalluser</pre>

Set the user's password:

<pre>passwd smalluser</pre>

Set samba password for the user “small user”, this should match the previous password:

<pre>smbpasswd -a smalluser</pre>

= Set permissions =

Set permissions on the local directory:

<pre>chown smalluser:smalluser /images/smallshare
chmod 770 /images/smallshare</pre>

= Configure Samba =

Setup the samba configuration script:

<pre>vi /etc/samba/smb.conf</pre>

Instructions on using Vi: [[vi]]

Below is the Samba configuration file. Things above [smallshare] are global and apply to all shares. Then below each bracket name, is settings specific to the share. Feel free to copy/paste.

<pre>security = user
passdb backend = tdbsam
unix charset = utf-8
dos charset = cp932

[smallshare]
path = /images/smallshare
read only = no
create mode = 0777
directory mode = 0777
writable = yes
valid users = smalluser</pre>

= Restart Samba =

Then restart Samba in Fedora/CentOS/RHEL:

<pre>systemctl restart smb</pre>

Restart Samba on Ubuntu/Debian:

<pre>service smb restart</pre>