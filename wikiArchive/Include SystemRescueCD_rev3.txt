[http://www.sysresccd.org/Main_Page|system rescue CD] will boot from the fog pxe menu without too much trouble. This distro has forensic tools for disaster recovery and is small enough to boot quickly. System rescue CD is based on [http://www.gentoo.org/|gentoo linux].

=== System Rescue CD Files ===
Download system rescue CD 3.3.0 from http://www.sysresccd.org/Download and loopback mounted it.

<pre>
cd /tmp
mkdir sysrescueCD
mount -o loop -t iso9660 systemrescuecd-x86-3.3.0.iso /tmp/sysrescueCD
</pre>

On the fog server I created /tftpboot/sysrescue and /images/sysrescue

<pre>
mkdir /tftpboot/sysrescue
mkdir /images/sysrescue
</pre>

Copy the necessary kernel and ramdisk into place.

<pre>
cp /tmp/sysrescueCD/isolinux/initram.igz /tftpboot/sysrescue
cp /tmp/sysrescueCD/isolinux/rescue32 /tftpboot/sysrescue
cp /tmp/sysrescueCD/isolinux/rescue64 /tftpboot/sysrescue
</pre>

Next copy the sysrcd.dat and sysrcd.md5 files into place

<pre>
cp /tmp/sysrescueCD/sysrcd.md5 /images/sysrescue
cp /tmp/sysrescueCD/sysrcd.dat /images/sysrescue
</pre>

Ensure that the new nfs directory will be exported by adding the following line to /etc/exports

<pre>
/images/sysrescue	       *(ro,insecure)
</pre>

And export it

<pre>
exportfs -va
</pre>

=== FOG Menu Items ===
The fog menu system can be adjusted manually by editing the file /tftpboot/pxelinux.cfg/default but changes to that file will not be respected when you update fog or if you change one of the PXE configuration settings in the FOG frontend. Instead we can use the frontend to make a persistent change.
<pre>
  -> Other Information
    -> PXE Boot Menu
      -> Advanced Settings
Add any custom text...

LABEL System Rescue CD "Live Image"
	LINUX sysrescue/rescue32
	INITRD sysrescue/initram.igz
	APPEND scandelay=1 docache netboot=nfs://<IP ADDRESS OF YOUR FOG SERVER>:/images/sysrescue setkmap=us
	TEXT
	SystemRescueCD network boot image (recovery)
	ENDTEXT

LABEL System Rescue CD "Live Image" 64 bit
	LINUX sysrescue/rescue64
	INITRD sysrescue/initram.igz
	APPEND scandelay=1 docache netboot=nfs://<IP ADDRESS OF YOUR FOG SERVER>:/images/sysrescue setkmap=us
	TEXT
	SystemRescueCD network boot image (recovery) 64 bit
	ENDTEXT

</pre>

When you boot the client you should now be able to see an entry for ''System Rescue CD "Live Image"'' which will boot SystemRescueCD with networking (and allow you to start X11 if you wish).

Remember to umount the loopback image from the fog server when you are done
<pre>
sudo umount /tmp/sysrescue
</pre>

[[category:pxe]]
[[category:customization]]